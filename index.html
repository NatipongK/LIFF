<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover" />
  <title>My LIFF App</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div>
     <!-- Logo -->
    <div class="center">
      <img src="logo/logo.png" width="90%" height="140" />
    </div>
    <br>

      <!-- Head  -->
    <div class="center">
      <div class="head">
        <p>Avision LIFF</p>
      </div>
    </div>
    <br>

    <!-- Line Picture -->
    <div class="center">
      <div class="picture_user">
        <img id="pictureUrl" />
      </div>
    </div>
    <br>
    
    <!-- การ์ดข้อมูลส่วนตัว -->
    <div class="center">
      <div class="user_data">
        <div>
          <table style="width: 100%">
            <tr>
              <td colspan="2" class="title" style="text-align: center;">ข้อมูลส่วนตัว</td>
            </tr>
            <tr>
              <td class="title" style="width: 40%">ชื่อ-นามสกุล</td>
              <td class="data" style="width: 60%">สุขใจ มีสุข</td>
            </tr>
            <tr>
              <td class="title" style="width: 40%">วันเดือนปีเกิด</td>
              <td class="data" style="width: 60%">12 กันยายน 1956</td>
            </tr>
            <tr>
              <td class="title" style="width: 40%">เบอร์โทรศัพท์</td>
              <td class="data" style="width: 60%">0845649155</td>
            </tr>
            <tr>
              <td class="title" style="width: 40%">อีเมล</td>
              <td class="data" style="width: 60%"><p id="getDecodedIDToken"></p></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <br>

<!-- ปุ่ม -->
    <div>
      <div class="center">
        <button class="button" onclick="location.href='user_data.html'">จัดการข้อมูลสมาชิก</button>
        <button class="button">โปรโมชั่น</button>
      </div>
      <div class="center">
        <button class="button">แลกพอยท์</button>
        <button class="button" onclick="location.href='contact.html'">ติดต่อ</button>
      </div>
    </div>
  </div>
</body>
</html>


<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

<script>
  function getUserProfile() {
    liff.getProfile().then(profile => {
      document.getElementById("pictureUrl").src = profile.pictureUrl;
      // document.getElementById("userId").innerHTML = profile.userId;
      // document.getElementById("displayName").innerHTML = profile.displayName;
      document.getElementById("getDecodedIDToken").innerHTML = liff.getDecodedIDToken().email;
    }).catch(err => console.error(err));
  }
  liff.init({ liffId: "1656217711-49Bo7QWy" }, () => {
    if (liff.isLoggedIn()) {
      getUserProfile()
    } else {
      liff.login();
    }
  }, err => console.error(err.code, error.message));
</script>
